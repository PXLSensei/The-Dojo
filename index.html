<section class="theater">
    <div class="video-grid">
        <iframe id="twitch-player" allow="autoplay; fullscreen" allowfullscreen></iframe>
        <iframe id="youtube-player" allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>
    </div>
    <div class="chat-grid">
        <div style="position:relative;"><div class="label">TWITCH</div><iframe id="twitch-chat"></iframe></div>
        <div style="position:relative;"><div class="label">YOUTUBE</div><iframe id="youtube-chat"></iframe></div>
    </div>
</section>

<div class="grid">
    <div class="card">
        <h3 style="font-family:'Syncopate'; font-size:0.6rem; margin-bottom:25px; color:var(--accent);">PXL_SENSEI_OFFLINE_CONTENT</h3>
        <iframe id="yt-feed" src="https://www.youtube.com/embed?listType=user_uploads&list=PXLSensei" style="height:450px; width:100%; border:none;"></iframe>
    </div>
    </div>

<script>
    function enterHub() {
        const loader = document.getElementById('loader');
        loader.style.opacity = '0';
        setTimeout(() => { loader.style.display = 'none'; }, 1500);
    }

    window.onload = () => {
        const domain = window.location.hostname || "localhost";
        // 2025 Security Fix: origin must match exactly what is in your address bar
        const origin = window.location.origin;

        // TWITCH SETUP
        const twitchParent = `&parent=${domain}&parent=www.${domain}`;
        document.getElementById('twitch-player').src = `https://player.twitch.tv/?channel=pxlsensei&autoplay=true&muted=true${twitchParent}`;
        document.getElementById('twitch-chat').src = `https://www.twitch.tv/embed/pxlsensei/chat?darkpopout${twitchParent}`;

        // YOUTUBE SETUP (The "Triple Origin" Fix)
        // We use your Channel ID to force the most recent live/video
        const ytChannelID = "UCxiaxssXjLp0Dz8g34DycnA"; 
        
        // Fix for Video Player
        document.getElementById('youtube-player').src = `https://www.youtube.com/embed/live_stream?channel=${ytChannelID}&autoplay=1&mute=1&origin=${origin}`;

        // Fix for Chat (Crucial: embed_domain must NOT have http/https, just the name)
        document.getElementById('youtube-chat').src = `https://www.youtube.com/live_chat?v=0AeedIUo_Y8&embed_domain=${domain}`;
    };
</script>
