<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PXL Sensei | Vault</title>
    <style>
        :root { --bg: #0b0e14; --panel: #161b22; --txt: #ffffff; --accent: #8b5cf6; --border: #30363d; --gold: #ffd700; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--txt); overflow-y: auto; }

        /* INTRO LOADER */
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.8s ease; }
        #introVideo { min-width: 100%; min-height: 100%; object-fit: cover; }
        .skip-btn { position: absolute; bottom: 40px; right: 40px; background: rgba(0,0,0,0.6); color: #fff; border: 1px solid var(--accent); padding: 10px 20px; cursor: pointer; z-index: 10000; }

        /* TITLE BAR */
        .vault-header {
            display: flex; align-items: center; justify-content: center; gap: 40px; padding: 30px 20px;
            background: linear-gradient(180deg, #161b22 0%, #0b0e14 100%);
            border-bottom: 2px solid var(--accent); box-shadow: 0 5px 15px rgba(0,0,0,0.5); perspective: 1000px;
        }
        .logo-container { width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .spinning-logo { width: 70px; height: 70px; object-fit: contain; animation: logo-flip 6s linear infinite; filter: drop-shadow(0 0 8px var(--accent)); }
        @keyframes logo-flip { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }
        .vault-title h2 { font-size: 2.2rem; letter-spacing: 10px; text-transform: uppercase; margin: 0; font-weight: 900; text-shadow: 0 0 10px rgba(139, 92, 246, 0.4); }

        /* TICKER */
        .ticker-wrap { width: 100%; overflow: hidden; background: #000; border-bottom: 1px solid var(--border); padding: 12px 0; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker-move 30s linear infinite; color: var(--gold); font-family: monospace; font-size: 0.85rem; letter-spacing: 2px; }
        @keyframes ticker-move { 0% { transform: translateX(100vw); } 100% { transform: translateX(-100%); } }
        .ticker span { margin-right: 150px; text-transform: uppercase; font-weight: bold; }

        /* MAIN LAYOUT */
        .main-content { max-width: 900px; margin: 30px auto; padding: 0 20px; }
        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); margin-bottom: 30px; }
        .schedule-container { width: 100%; height: 500px; background: var(--panel); border-radius: 12px; overflow: hidden; border: 1px solid var(--border); margin-bottom: 30px; }
        
        /* BLOG ITEMS */
        .blog-item { display: flex; gap: 20px; background: var(--panel); padding: 20px; border-radius: 12px; cursor: pointer; margin-bottom: 15px; border: 1px solid var(--border); align-items: center; transition: 0.3s; }
        .blog-item:hover { border-color: var(--accent); transform: translateY(-3px); }
        .blog-thumb { width: 140px; height: 80px; border-radius: 6px; object-fit: cover; }

        /* READER OVERLAY */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 1000; overflow-y: auto; padding: 60px 20px; }
        .close-btn { position: fixed; top: 20px; right: 20px; color: var(--accent); cursor: pointer; font-weight: bold; z-index: 1001; background: #222; padding: 8px 12px; border-radius: 4px; }
        #backToTop { display: none; position: fixed; bottom: 30px; right: 30px; background: var(--accent); color: white; border: none; padding: 12px 18px; border-radius: 50px; cursor: pointer; font-weight: bold; z-index: 2001; }
    </style>
</head>
<body>

<div id="loader">
    <video id="introVideo" autoplay muted playsinline><source src="intro.mp4" type="video/mp4"></video>
    <button class="skip-btn" onclick="hideLoader()">SKIP INTRO</button>
</div>

<header class="vault-header">
    <div class="logo-container"><img src="./logo.png" class="spinning-logo" onerror="this.src='https://via.placeholder.com/70/8b5cf6/ffffff?text=PXL'"></div>
    <div class="vault-title">
        <h2>PXL <span style="color:var(--accent);">VAULT</span></h2>
        <div style="font-size: 0.6rem; color: #555; letter-spacing: 3px; text-align: center; margin-top: 5px; font-weight: 800;">DATA ARCHIVE v2.2</div>
    </div>
    <div class="logo-container"><img src="./logo.png" class="spinning-logo" onerror="this.src='https://via.placeholder.com/70/8b5cf6/ffffff?text=PXL'"></div>
</header>

<div class="ticker-wrap">
    <div class="ticker">
        <span>[SYSTEM] TWITCH SCHEDULE SYNCED</span>
        <span>[UPDATE] NEW GUIDE: HOW TO STREAM IN 2026</span>
        <span>[NETWORK] ENCRYPTION ACTIVE</span>
        <span>[LOG] WELCOME BACK, OPERATOR.</span>
    </div>
</div>

<div id="reader" class="overlay">
    <span class="close-btn" onclick="closeArticle()">CLOSE [X]</span>
    <div id="articleBody" style="max-width: 750px; margin: 0 auto; padding-bottom: 50px;"></div>
</div>

<button id="backToTop" onclick="scrollToTop()">â†‘ TOP</button>

<main class="main-content">
    <div class="video-container">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/fDlkYYQ4rUc?autoplay=1&mute=1&rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <h3 style="color:var(--gold); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; font-size: 0.9rem;">Live Transmission Schedule</h3>
    <div class="schedule-container">
        <iframe src="https://www.twitch.tv/PXLSensei/schedule?embed" height="100%" width="100%" frameborder="0"></iframe>
    </div>

    <h3 style="color:var(--accent); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px;">Data Archives</h3>
    <div id="blogList">Connecting...</div>
</main>

<script>
    const JSON_URL = 'https://raw.githubusercontent.com/PXLSensei/PXLVault/main/blog.json';
    let posts = [];

    function hideLoader() {
        const l = document.getElementById('loader');
        l.style.opacity = '0';
        setTimeout(() => { l.style.display = 'none'; document.body.style.overflow = 'auto'; }, 800);
    }
    setTimeout(hideLoader, 6000);
    document.getElementById('introVideo').onended = hideLoader;

    async function loadVault() {
        try {
            const response = await fetch(JSON_URL);
            posts = await response.json();
            const list = document.getElementById('blogList');
            list.innerHTML = ''; 
            posts.forEach(post => {
                list.innerHTML += `
                    <div class="blog-item" onclick="openArticle('${post.id}')">
                        <img src="${post.thumb}" class="blog-thumb" onerror="this.src='https://via.placeholder.com/140x80/222/8b5cf6?text=PXL'">
                        <div>
                            <h4 style="margin:0; font-size: 1.1rem;">${post.title}</h4>
                            <span style="font-size:0.75rem; color:var(--gold); font-weight: bold;">${post.date}</span>
                        </div>
                    </div>`;
            });
        } catch (e) { document.getElementById('blogList').innerHTML = "Sync Error."; }
    }

    function openArticle(id) {
        const p = posts.find(x => x.id === id);
        if(!p) return;
        document.getElementById('articleBody').innerHTML = `
            <h1 style="color:var(--accent); margin-bottom:10px; font-size: 2.5rem;">${p.title}</h1>
            <p style="color:var(--gold); margin-bottom:25px; font-weight: bold;">${p.date}</p>
            <div style="font-size:1.1rem; line-height:1.7; color:#ddd;">${p.content}</div>
        `;
        document.getElementById('reader').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeArticle() { document.getElementById('reader').style.display = 'none'; document.body.style.overflow = 'auto'; }

    document.getElementById('reader').onscroll = function() {
        const btn = document.getElementById('backToTop');
        if (this.scrollTop > 400) { btn.style.display = "block"; } 
        else { btn.style.display = "none"; }
    };

    function scrollToTop() { document.getElementById('reader').scrollTo({ top: 0, behavior: 'smooth' }); }

    window.onload = loadVault;
</script>
</body>
</html>
